//
//  File.swift
//  Redbreast
//
//  Created by Maroje MarceliÄ‡ on 02/09/2021.
//

import Foundation

let info =
    """
Pods/PKHUD/PKHUD/Images.xcassets/progress_activity.imageset
Pods/PKHUD/PKHUD/Images.xcassets/cross.imageset
Pods/PKHUD/PKHUD/Images.xcassets/progress_circular.imageset
Pods/PKHUD/PKHUD/Images.xcassets/checkmark.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Document.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/ArrowRightThin.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Magnifier.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Notification.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/LoginBackground.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/DealerDark.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Bonus.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/GoToDarkFilled.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Calendar.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Arrow/Up.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Arrow/Back.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Arrow/BackWhite.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Arrow/Down.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Arrow/Left.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Arrow/Right.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/CallDarkFilled.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/InfinumLogo.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/SearchDark.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/GoToWhiteFilled.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Faq.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/PromotionsDark.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Picked.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Close.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/LoginBackgroundLogo.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/ProfileClear.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/AddCircle.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/engine.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/ServiceMapDarkFilled.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Bills.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Gradient.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Notifications.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Card.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Background.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Map.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Assistance.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Arrows/Left.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Arrows/Right.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/WalkMeThrough/Interests.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Card.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/AssistanceClear.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/icEmailRedFilled.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/DashboardClear.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Profile.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/ShareDarkActive.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Edit.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Assistance.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Dashboard.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Share.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Settings.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Brand Logos/pgc.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Brand Logos/skoda.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Brand Logos/porsche.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Brand Logos/vwCommercial.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Brand Logos/audi.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Brand Logos/seat.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Brand Logos/vw.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/ProfileBackground.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/AddServiceDarkFilled.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/icCallRedFilled.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/CarBody.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Full.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/MyLocation.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Pin.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/CarGlass.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Filter/Dealers.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Filter/Services.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Filter/PromotionSelected.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Filter/DealersSelected.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Filter/Promotion.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Filter/ServicesSelected.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/map_lel/Clear.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Placeholder.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Car.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/AddCar.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Ovo je_trulo/Phone.imageset
PorscheGroupCard/Resources/Images.xcassets/PGC/Ovo je_trulo/PGCCard.imageset
"""

class Input {

    static func readFile() {
        let path = "/Users/maroje/Infinum/PGC/iOS-Porsche-Group-Card/PorscheGroupCard/Resources/Images.xcassets"

        do {
            let files = try FileManager.default.contentsOfDirectory(atPath: path)
            let f = try FileManager.default.subpathsOfDirectory(atPath: path)
            let auu = Set(f
                .filter { $0.contains(".imageset") }
                .compactMap { $0.components(separatedBy: ".imageset").first }
//                .map { $0.camelized.uppercasingFirst }
            )

//            auu.forEach { print($0) }

            let p = auu.flatMap { $0.components(separatedBy: "/") }.map { $0.camelized.lowercasingFirst }
//            p.forEach { print($0) }
//            print(f)
            //            FileManager.default.
//            print(files)
        } catch {
            print(error)
        }

    }

    static func writeToFile(assets: [String], bundle: String, appName: String) {
        let path = "/Users/maroje/Infinum/redbreast/redbreast/Redbreast/Redbreast/result.json"

        let startString =
            """
            //import UIKit

            // THIS FILE IS AUTOGENERATED, DO NOT EDIT BY HAND
            // swiftlint:disable file_length type_body_length line_length superfluous_disable_command
            \(Input.generateExtension(tekst: "UIImage", appName: appName))
            \(Input.generateSwiftFile(names: assets, variable: "static var %@: UIImage { return UIImage(named: \"%@\", in: %@, compatibleWith: nil)! }\n", bundle: bundle))}
            """
        let filename = FileManager.default.createFile(atPath: path, contents: startString.data(using: .utf8), attributes: nil)

//        print(filename)

    }

    static func generateExtension(tekst: String, appName: String) -> String {
        return "extension \(tekst) {\n \tenum \(appName) {}\n}\n\nextension \(tekst).\(appName) {\n"
    }

    static func generateSwiftFile(names: [String], variable: String, bundle: String, fullName: String = "", spacing: String = "\t") -> String {

        print(names)
        var start = ""


//        print(names)

        let a = names.map { $0.components(separatedBy: "/")}
        let onlyVars = a.filter { $0.count == 1 }.flatMap { $0 }

        start += generateVariable(vars: onlyVars, text: variable, indent: " ", spacing: spacing, fullName: fullName)
        let folders = a.filter { $0.count > 1 }
//        folders.forEach { print($0) }

        let enums = Set(folders.compactMap { $0.first })

//        print(enums)
        enums.forEach { (e) in
            start.append("\n\(spacing)enum \(Util.convertToUpperCamelCase(name: e)) {\n")
            print(folders)
            let lll = folders.filter { $0.first == e }.map { folder in
                folder.dropFirst(1).joined(separator: "/")
            }
//                .map { String($0.joined(separator: "/")) }
            print("lll")
            print(lll)
            start.append(generateSwiftFile(names: lll, variable: variable, bundle: bundle, fullName: fullName.appending("\(e)/"), spacing: spacing.appending("\t")))
            start.append("\(spacing)}\n")
//            start.append(folders.filter { $0. })

        }

//        whi


//        print(onlyVars)
//        print(folders)
//        print(a)
//        a.forEach {
//            // ako je 1 generiraj varijablu
////            if $0.count == 1 {
////                start.append(String(format: variable, $0[0], "Vlaho", "Luka"))
////                return
////            }
//            // inace generiraj enum
//            print($0)
//        }


        return start
    }

    static func generateVariable(vars: [String], text: String, indent: String, spacing: String, fullName: String) -> String {

        var fileText = ""
        vars.forEach {
            fileText += spacing + String(format: text, Util.convertToLowerCamelCase(name: $0), fullName.appending($0), ".main")
//            print($0)
        }

//        print(fileText)

        return fileText
    }

    static func generateEnumAndVars() {

    }
}
